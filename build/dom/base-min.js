/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Apr 17 00:15
*/
KISSY.add("dom/base/api",function(c){var b=c.Env.host,g=c.UA,q={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12},j={isCustomDomain:function(c){var c=c||b,g=c.document.domain,c=c.location.hostname;return g!=c&&g!="["+c+"]"},getEmptyIframeSrc:function(c){c=c||b;return g.ie&&j.isCustomDomain(c)?"javascript:void(function(){"+
encodeURIComponent("document.open();document.domain='"+c.document.domain+"';document.close();")+"}())":""},NodeType:q,getWindow:function(c){return!c?b:"scrollTo"in c&&c.document?c:c.nodeType==q.DOCUMENT_NODE?c.defaultView||c.parentWindow:!1},_isNodeList:function(b){return b&&!b.nodeType&&b.item&&!b.setTimeout},nodeName:function(b){var c=j.get(b),b=c.nodeName.toLowerCase();g.ie&&(c=c.scopeName)&&"HTML"!=c&&(b=c.toLowerCase()+":"+b);return b},_RE_NUM_NO_PX:RegExp("^("+/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source+
")(?!px)[a-z%]+$","i")};c.mix(j,q);return j});
KISSY.add("dom/base/attr",function(c,b,g){function q(b,d){var d=e[d]||d,a=u[d];return a&&a.get?a.get(b,d):b[d]}var j=c.Env.host.document,m=b.NodeType,j=j&&j.documentElement,p=b.nodeName,k=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,f=/^(?:button|input|object|select|textarea)$/i,i=/^a(?:rea)?$/i,n=/:|^on/,d=/\r/g,a={},h={val:1,css:1,html:1,text:1,data:1,width:1,height:1,offset:1,scrollTop:1,scrollLeft:1},w={tabindex:{get:function(b){var d=
b.getAttributeNode("tabindex");return d&&d.specified?parseInt(d.value,10):f.test(b.nodeName)||i.test(b.nodeName)&&b.href?0:g}}},e={hidefocus:"hideFocus",tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},t={get:function(d,x){return b.prop(d,x)?x.toLowerCase():g},set:function(d,x,a){!1===x?
b.removeAttr(d,a):(x=e[a]||a,x in d&&(d[x]=!0),d.setAttribute(a,a.toLowerCase()));return a}},u={},o={},l={select:{get:function(d){var a=d.selectedIndex,e=d.options,c;if(0>a)return null;if("select-one"===""+d.type)return b.val(e[a]);d=[];a=0;for(c=e.length;a<c;++a)e[a].selected&&d.push(b.val(e[a]));return d},set:function(d,a){var e=c.makeArray(a);c.each(d.options,function(d){d.selected=c.inArray(b.val(d),e)});e.length||(d.selectedIndex=-1);return e}}};c.each(["radio","checkbox"],function(d){l[d]={get:function(b){return null===
b.getAttribute("value")?"on":b.value},set:function(d,a){return c.isArray(a)?d.checked=c.inArray(b.val(d),a):g}}});w.style={get:function(b){return b.style.cssText}};c.mix(b,{_valHooks:l,_propFix:e,_attrHooks:w,_propHooks:u,_attrNodeHook:o,_attrFix:a,prop:function(d,a,l){var h=b.query(d),o,r;if(c.isPlainObject(a))return c.each(a,function(d,a){b.prop(h,a,d)}),g;a=e[a]||a;r=u[a];if(l!==g)for(d=h.length-1;0<=d;d--)o=h[d],r&&r.set?r.set(o,l,a):o[a]=l;else if(h.length)return q(h[0],a);return g},hasProp:function(d,
a){var e=b.query(d),c,l=e.length,r;for(c=0;c<l;c++)if(r=e[c],q(r,a)!==g)return!0;return!1},removeProp:function(d,a){var a=e[a]||a,c=b.query(d),l,h;for(l=c.length-1;0<=l;l--){h=c[l];try{h[a]=g,delete h[a]}catch(r){}}},attr:function(d,e,l,f){var i=b.query(d),r=i[0];if(c.isPlainObject(e)){var f=l,y;for(y in e)b.attr(i,y,e[y],f);return g}if(f&&h[e])return b[e](d,l);e=e.toLowerCase();if(f&&h[e])return b[e](d,l);e=a[e]||e;d=k.test(e)?t:n.test(e)?o:w[e];if(l===g){if(r&&r.nodeType===m.ELEMENT_NODE){"form"==
p(r)&&(d=o);if(d&&d.get)return d.get(r,e);e=r.getAttribute(e);return null===e?g:e}}else for(f=i.length-1;0<=f;f--)if((r=i[f])&&r.nodeType===m.ELEMENT_NODE)"form"==p(r)&&(d=o),d&&d.set?d.set(r,l,e):r.setAttribute(e,""+l);return g},removeAttr:function(d,c){var c=c.toLowerCase(),c=a[c]||c,l=b.query(d),h,o,r;for(r=l.length-1;0<=r;r--)if(o=l[r],o.nodeType==m.ELEMENT_NODE&&(o.removeAttribute(c),k.test(c)&&(h=e[c]||c)in o))o[h]=!1},hasAttr:j&&!j.hasAttribute?function(d,a){var a=a.toLowerCase(),e=b.query(d),
c,l;for(c=0;c<e.length;c++)if(l=e[c],(l=l.getAttributeNode(a))&&l.specified)return!0;return!1}:function(d,a){var e=b.query(d),c,l=e.length;for(c=0;c<l;c++)if(e[c].hasAttribute(a))return!0;return!1},val:function(a,e){var h,o,f,r,y;if(e===g){if(f=b.get(a)){if((h=l[p(f)]||l[f.type])&&"get"in h&&(o=h.get(f,"value"))!==g)return o;o=f.value;return"string"===typeof o?o.replace(d,""):null==o?"":o}return g}o=b.query(a);for(r=o.length-1;0<=r;r--){f=o[r];if(1!==f.nodeType)break;y=e;null==y?y="":"number"===typeof y?
y+="":c.isArray(y)&&(y=c.map(y,function(b){return b==null?"":b+""}));h=l[p(f)]||l[f.type];if(!h||!("set"in h)||h.set(f,y,"value")===g)f.value=y}return g},text:function(d,a){var e,c,l,r;if(a===g)return e=b.get(d),b._getText(e);c=b.query(d);for(l=c.length-1;0<=l;l--)if(e=c[l],r=e.nodeType,r==m.ELEMENT_NODE)b.empty(e),e.appendChild(e.ownerDocument.createTextNode(a));else if(r==m.TEXT_NODE||r==m.CDATA_SECTION_NODE)e.nodeValue=a;return g},_getText:function(b){return b.textContent}});return b},{requires:["./api"]});
KISSY.add("dom/base",function(c,b){c.mix(c,{DOM:b,get:b.get,query:b.query});return b},{requires:"./base/api,./base/attr,./base/class,./base/create,./base/data,./base/insertion,./base/offset,./base/style,./base/selector,./base/traversal".split(",")});
KISSY.add("dom/base/class",function(c,b){function g(b){for(var b=c.trim(b||""),b=b.split(k),i=[],g,d=b.length,a=0;a<d;a++)(g=b[a])&&i.push(g);return i}function q(b){return function(c,g){var d,a,h,w=c.classList,e=m.call(arguments,2);d=0;for(a=g.length;d<a;d++)(h=g[d])&&w[b].apply(w,[h].concat(e))}}function j(c){return function(i,k){var d=g(k),a=m.call(arguments,2);b.query(i).each(function(h){h.nodeType==p.ELEMENT_NODE&&b[c].apply(b,[h,d].concat(a))})}}var m=[].slice,p=b.NodeType,k=/[\.\s]\s*\.?/;c.mix(b,
{_hasClass:function(b,c){var g,d,a,h=b.classList;if(h.length){g=0;for(d=c.length;g<d;g++)if((a=c[g])&&!h.contains(a))return!1;return!0}return!1},_addClass:q("add"),_removeClass:q("remove"),_toggleClass:q("toggle"),hasClass:function(c,i){var k=b.get(c);return k&&k.nodeType==p.ELEMENT_NODE&&b._hasClass(k,g(i))},replaceClass:function(c,g,k){b.removeClass(c,g);b.addClass(c,k)},addClass:j("_addClass"),removeClass:j("_removeClass"),toggleClass:j("_toggleClass")});return b},{requires:["./api"]});
KISSY.add("dom/base/create",function(c,b,g){function q(d){var a=c.require("event/dom/base");a&&a.detach(d);b.removeData(d)}function j(b,e){var c=e&&e!=f?e.createElement(d):a;c.innerHTML="m<div>"+b+"</div>";return c.lastChild}function m(b,d,a){var e=d.nodeType;if(e==i.DOCUMENT_FRAGMENT_NODE){d=d.childNodes;a=a.childNodes;for(e=0;d[e];)a[e]&&m(b,d[e],a[e]),e++}else if(e==i.ELEMENT_NODE){d=d.getElementsByTagName("*");a=a.getElementsByTagName("*");for(e=0;d[e];)a[e]&&b(d[e],a[e]),e++}}function p(d,a){var e=
c.require("event/dom"),l,v;if(a.nodeType!=i.ELEMENT_NODE||b.hasData(d)){l=b.data(d);for(v in l)b.data(a,v,l[v]);e&&(e._DOMUtils.removeData(a),e._clone(d,a))}}function k(b){var d=null,a,e;if(b&&(b.push||b.item)&&b[0]){d=b[0].ownerDocument;d=d.createDocumentFragment();b=c.makeArray(b);a=0;for(e=b.length;a<e;a++)d.appendChild(b[a])}return d}var f=c.Env.host.document,i=b.NodeType,n=c.UA.ie,d="div",a=f&&f.createElement(d),h=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,w=/<([\w:]+)/,
e=/^\s+/,t=/\s+$/,u=n&&9>n,o=/<|&#?\w+;/,l=f&&"outerHTML"in f.documentElement,B=/^<(\w+)\s*\/?>(?:<\/\1>)?$/;c.mix(b,{create:function(a,l,x,A){var v=null;if(!a)return v;if(a.nodeType)return b.clone(a);if("string"!=typeof a)return v;A===g&&(A=!0);A&&(a=c.trim(a));var A=b._creators,s,D,x=x||f,E,F=d;if(o.test(a))if(E=B.exec(a))v=x.createElement(E[1]);else{a=a.replace(h,"<$1></$2>");if((E=w.exec(a))&&(s=E[1]))F=s.toLowerCase();s=(A[F]||j)(a,x);u&&(D=a.match(e))&&s.insertBefore(x.createTextNode(D[0]),
s.firstChild);u&&/\S/.test(a)&&(D=a.match(t))&&s.appendChild(x.createTextNode(D[0]));a=s.childNodes;1===a.length?v=a[0].parentNode.removeChild(a[0]):a.length&&(v=k(a))}else v=x.createTextNode(a);c.isPlainObject(l)&&(v.nodeType==i.ELEMENT_NODE?b.attr(v,l,!0):v.nodeType==i.DOCUMENT_FRAGMENT_NODE&&b.attr(v.childNodes,l,!0));return v},_fixCloneAttributes:function(d,a){"textarea"===b.nodeName(d)&&(a.defaultValue=d.defaultValue,a.value=d.value)},_creators:{div:j},_defaultCreator:j,html:function(d,a,c){var d=
b.query(d),l=d[0],v=!1,s,h;if(!l)return null;if(a===g)return l.nodeType==i.ELEMENT_NODE?l.innerHTML:null;a+="";if(!a.match(/<(?:script|style|link)/i)&&(!u||!a.match(e))&&!z[(a.match(w)||["",""])[1].toLowerCase()])try{for(s=d.length-1;0<=s;s--)h=d[s],h.nodeType==i.ELEMENT_NODE&&(q(h.getElementsByTagName("*")),h.innerHTML=a);v=!0}catch(o){}v||(a=b.create(a,0,l.ownerDocument,0),b.empty(d),b.append(a,d,c));return g},outerHTML:function(e,c,h){var o=b.query(e),v=o.length,e=o[0];if(!e)return null;if(c===
g){if(l)return e.outerHTML;c=(c=e.ownerDocument)&&c!=f?c.createElement(d):a;c.innerHTML="";c.appendChild(b.clone(e,!0));c.appendChild(b.clone(e,!0));return c.innerHTML}c+="";if(!c.match(/<(?:script|style|link)/i)&&l)for(h=v-1;0<=h;h--)e=o[h],e.nodeType==i.ELEMENT_NODE&&(q(e),q(e.getElementsByTagName("*")),e.outerHTML=c);else e=b.create(c,0,e.ownerDocument,0),b.insertBefore(e,o,h),b.remove(o);return g},remove:function(d,a){var e,l=b.query(d),v,s,h=c.require("event/dom/base"),o;for(o=l.length-1;0<=
o;o--)e=l[o],!a&&e.nodeType==i.ELEMENT_NODE&&(v=c.makeArray(e.getElementsByTagName("*")),v.push(e),b.removeData(v),h&&h.detach(v)),(s=e.parentNode)&&s.removeChild(e)},clone:function(d,a,e,c){"object"===typeof a&&(c=a.deepWithDataAndEvent,e=a.withDataAndEvent,a=a.deep);var d=b.get(d),l,s=b._fixCloneAttributes,h;if(!d)return null;h=d.nodeType;l=d.cloneNode(a);if(h==i.ELEMENT_NODE||h==i.DOCUMENT_FRAGMENT_NODE)s&&h==i.ELEMENT_NODE&&s(d,l),a&&s&&m(s,d,l);e&&(p(d,l),a&&c&&m(p,d,l));return l},empty:function(d){var d=
b.query(d),a,e;for(e=d.length-1;0<=e;e--)a=d[e],b.remove(a.childNodes)},_nodeListToFragment:k});var x=b._creators,A=b.create,z={option:"select",optgroup:"select",area:"map",thead:"table",td:"tr",th:"tr",tr:"tbody",tbody:"table",tfoot:"table",caption:"table",colgroup:"table",col:"colgroup",legend:"fieldset"},C;for(C in z)(function(b){x[C]=function(d,a){return A("<"+b+">"+d+"</"+b+">",null,a)}})(z[C]);return b},{requires:["./api"]});
KISSY.add("dom/base/data",function(c,b,g){var q=c.Env.host,j="_ks_data_"+c.now(),m={},p={},k={applet:1,object:1,embed:1},f={hasData:function(b,a){if(b)if(a!==g){if(a in b)return!0}else if(!c.isEmptyObject(b))return!0;return!1}},i={hasData:function(b,a){return b==q?i.hasData(p,a):f.hasData(b[j],a)},data:function(b,a,c){if(b==q)return i.data(p,a,c);var f=b[j];if(c!==g)f=b[j]=b[j]||{},f[a]=c;else return a!==g?f&&f[a]:f=b[j]=b[j]||{}},removeData:function(b,a){if(b==q)return i.removeData(p,a);var h=b[j];
if(a!==g)delete h[a],c.isEmptyObject(h)&&i.removeData(b);else try{delete b[j]}catch(f){b[j]=g}}},n={hasData:function(b,a){var c=b[j];return!c?!1:f.hasData(m[c],a)},data:function(b,a,h){if(k[b.nodeName.toLowerCase()])return g;var f=b[j];if(!f){if(a!==g&&h===g)return g;f=b[j]=c.guid()}b=m[f];if(h!==g)b=m[f]=m[f]||{},b[a]=h;else return a!==g?b&&b[a]:b=m[f]=m[f]||{}},removeData:function(b,a){var h=b[j],f;if(h)if(f=m[h],a!==g)delete f[a],c.isEmptyObject(f)&&n.removeData(b);else{delete m[h];try{delete b[j]}catch(e){b[j]=
g}b.removeAttribute&&b.removeAttribute(j)}}};c.mix(b,{__EXPANDO:j,hasData:function(d,a){for(var c=!1,f=b.query(d),e=0;e<f.length&&!(c=f[e],c=c.nodeType?n.hasData(c,a):i.hasData(c,a));e++);return c},data:function(d,a,h){var d=b.query(d),f=d[0];if(c.isPlainObject(a)){for(var e in a)b.data(d,e,a[e]);return g}if(h===g){if(f)return f.nodeType?n.data(f,a):i.data(f,a)}else for(e=d.length-1;0<=e;e--)f=d[e],f.nodeType?n.data(f,a,h):i.data(f,a,h);return g},removeData:function(d,a){var c=b.query(d),f,e;for(e=
c.length-1;0<=e;e--)f=c[e],f.nodeType?n.removeData(f,a):i.removeData(f,a)}});return b},{requires:["./api"]});
KISSY.add("dom/base/insertion",function(c,b){function g(b,a){var c=[],j,e,t;for(j=0;b[j];j++)if(e=b[j],t=k(e),e.nodeType==m.DOCUMENT_FRAGMENT_NODE)c.push.apply(c,g(f(e.childNodes),a));else if("script"===t&&(!e.type||n.test(e.type)))e.parentNode&&e.parentNode.removeChild(e),a&&a.push(e);else{if(e.nodeType==m.ELEMENT_NODE&&!p.test(t)){t=[];var u,o,l=e.getElementsByTagName("script");for(o=0;o<l.length;o++)u=l[o],(!u.type||n.test(u.type))&&t.push(u);i.apply(b,[j+1,0].concat(t))}c.push(e)}return c}function q(b){b.src?
c.getScript(b.src):(b=c.trim(b.text||b.textContent||b.innerHTML||""))&&c.globalEval(b)}function j(d,a,f,k){d=b.query(d);k&&(k=[]);d=g(d,k);b._fixInsertionChecked&&b._fixInsertionChecked(d);var a=b.query(a),e,i,u,o,l=a.length;if((d.length||k&&k.length)&&l){d=b._nodeListToFragment(d);1<l&&(o=b.clone(d,!0),a=c.makeArray(a));for(e=0;e<l;e++)i=a[e],d&&(u=0<e?b.clone(o,!0):d,f(u,i)),k&&k.length&&c.each(k,q)}}var m=b.NodeType,p=/^(?:button|input|object|select|textarea)$/i,k=b.nodeName,f=c.makeArray,i=[].splice,
n=/\/(java|ecma)script/i;c.mix(b,{_fixInsertionChecked:null,insertBefore:function(b,a,c){j(b,a,function(b,a){a.parentNode&&a.parentNode.insertBefore(b,a)},c)},insertAfter:function(b,a,c){j(b,a,function(b,a){a.parentNode&&a.parentNode.insertBefore(b,a.nextSibling)},c)},appendTo:function(b,a,c){j(b,a,function(b,a){a.appendChild(b)},c)},prependTo:function(b,a,c){j(b,a,function(b,a){a.insertBefore(b,a.firstChild)},c)},wrapAll:function(c,a){a=b.clone(b.get(a),!0);c=b.query(c);c[0].parentNode&&b.insertBefore(a,
c[0]);for(var f;(f=a.firstChild)&&1==f.nodeType;)a=f;b.appendTo(c,a)},wrap:function(d,a){d=b.query(d);a=b.get(a);c.each(d,function(c){b.wrapAll(c,a)})},wrapInner:function(d,a){d=b.query(d);a=b.get(a);c.each(d,function(c){var d=c.childNodes;d.length?b.wrapAll(d,a):c.appendChild(a)})},unwrap:function(d){d=b.query(d);c.each(d,function(a){a=a.parentNode;b.replaceWith(a,a.childNodes)})},replaceWith:function(c,a){var f=b.query(c),a=b.query(a);b.remove(a,!0);b.insertBefore(a,f);b.remove(f)}});c.each({prepend:"prependTo",
append:"appendTo",before:"insertBefore",after:"insertAfter"},function(c,a){b[a]=b[c]});return b},{requires:["./api"]});
KISSY.add("dom/base/offset",function(c,b,g){function q(b){var a,c=b.ownerDocument.body;if(!b.getBoundingClientRect)return{left:0,top:0};a=b.getBoundingClientRect();b=a[h];a=a[w];b-=f.clientLeft||c.clientLeft||0;a-=f.clientTop||c.clientTop||0;return{left:b,top:a}}function j(c,e){var d={left:0,top:0},f=i(c[a]),g,k=c,e=e||f;do{if(f==e){var h=k;g=q(h);h=i(h[a]);g.left+=b[t](h);g.top+=b[u](h)}else g=q(k);d.left+=g.left;d.top+=g.top}while(f&&f!=e&&(k=f.frameElement)&&(f=f.parent));return d}var m=c.Env.host,
p=m.document,k=b.NodeType,f=p&&p.documentElement,i=b.getWindow,n=Math.max,d=parseInt,a="ownerDocument",h="left",w="top",e=c.isNumber,t="scrollLeft",u="scrollTop";c.mix(b,{offset:function(a,c,e){if(c===g){var a=b.get(a),f;a&&(f=j(a,e));return f}e=b.query(a);for(f=e.length-1;0<=f;f--){var a=e[f],k=c;"static"===b.css(a,"position")&&(a.style.position="relative");var h=j(a),i={},u=void 0,t=void 0;for(t in k)u=d(b.css(a,t),10)||0,i[t]=u+k[t]-h[t];b.css(a,i)}return g},scrollIntoView:function(a,e,f,u){var t,
j,n,r;if(n=b.get(a)){e&&(e=b.get(e));e||(e=n.ownerDocument);e.nodeType==k.DOCUMENT_NODE&&(e=i(e));c.isPlainObject(f)&&(u=f.allowHorizontalScroll,r=f.onlyScrollIfNeeded,f=f.alignWithTop);u=u===g?!0:u;j=!!i(e);var a=b.offset(n),q=b.outerHeight(n);t=b.outerWidth(n);var m,p,v,s;j?(j=e,m=b.height(j),p=b.width(j),s={left:b.scrollLeft(j),top:b.scrollTop(j)},j=a[h]-s[h],n=a[w]-s[w],t=a[h]+t-(s[h]+p),a=a[w]+q-(s[w]+m)):(m=b.offset(e),p=e.clientHeight,v=e.clientWidth,s={left:b.scrollLeft(e),top:b.scrollTop(e)},
j=a[h]-(m[h]+(d(b.css(e,"borderLeftWidth"))||0)),n=a[w]-(m[w]+(d(b.css(e,"borderTopWidth"))||0)),t=a[h]+t-(m[h]+v+(d(b.css(e,"borderRightWidth"))||0)),a=a[w]+q-(m[w]+p+(d(b.css(e,"borderBottomWidth"))||0)));if(r){if(0>n||0<a)!0===f?b.scrollTop(e,s.top+n):!1===f?b.scrollTop(e,s.top+a):0>n?b.scrollTop(e,s.top+n):b.scrollTop(e,s.top+a)}else(f=f===g?!0:!!f)?b.scrollTop(e,s.top+n):b.scrollTop(e,s.top+a);if(u)if(r){if(0>j||0<t)!0===f?b.scrollLeft(e,s.left+j):!1===f?b.scrollLeft(e,s.left+t):0>j?b.scrollLeft(e,
s.left+j):b.scrollLeft(e,s.left+t)}else(f=f===g?!0:!!f)?b.scrollLeft(e,s.left+j):b.scrollLeft(e,s.left+t)}},docWidth:0,docHeight:0,viewportHeight:0,viewportWidth:0,scrollTop:0,scrollLeft:0});c.each(["Left","Top"],function(a,c){var d="scroll"+a;b[d]=function(f,h){if(e(f))return arguments.callee(m,f);var f=b.get(f),j,t,u,n=i(f);n?h!==g?(h=parseFloat(h),t="Left"==a?h:b.scrollLeft(n),u="Top"==a?h:b.scrollTop(n),n.scrollTo(t,u)):(j=n["page"+(c?"Y":"X")+"Offset"],e(j)||(t=n.document,j=t.documentElement[d],
e(j)||(j=t.body[d]))):f.nodeType==k.ELEMENT_NODE&&(h!==g?f[d]=parseFloat(h):j=f[d]);return j}});c.each(["Width","Height"],function(a){b["doc"+a]=function(e){e=b.get(e);e=i(e).document;return n(e.documentElement["scroll"+a],e.body["scroll"+a],b["viewport"+a](e))};b["viewport"+a]=function(e){var e=b.get(e),c="client"+a,e=i(e).document,d=e.body,f=e.documentElement[c];return"CSS1Compat"===e.compatMode&&f||d&&d[c]||f}});return b},{requires:["./api"]});
KISSY.add("dom/base/selector",function(c,b){function g(b){var a=this.length,c;for(c=0;c<a&&!1!==b(this[c],c);c++);}function q(e,c){var d,h;d="string"==typeof e;var l=c?q(c):(h=1)&&[k],j=l.length;if(e)if(d)if(e=w(e),h&&"body"==e)d=[k.body];else{d=[];for(h=0;h<j;h++)a.apply(d,b._selectInternal(e,l[h]));1<d.length&&1<j&&b.unique(d)}else{if(d=e.nodeType||e.setTimeout?[e]:e.getDOMNodes?e.getDOMNodes():f(e)?e:n(e)?i(e):[e],!h){var m=d,p,z=m.length;d=[];for(h=0;h<z;h++)for(p=0;p<j;p++)if(b._contains(l[p],
m[h])){d.push(m[h]);break}}}else d=[];d.each=g;return d}function j(b,a){var c=b&&(b.className||m(b,"class"));return c&&-1<(d+c+d).indexOf(d+a+d)}function m(b,a){var c=b&&b.getAttributeNode(a);if(c&&c.specified)return c.nodeValue}function p(b,a){return"*"==a||b.nodeName.toLowerCase()===a.toLowerCase()}var k=c.Env.host.document,f=c.isArray,i=c.makeArray,n=b._isNodeList,d=" ",a=Array.prototype.push,h=/^(?:#([\w-]+))?\s*([\w-]+|\*)?\.?([\w-]+)?$/,w=c.trim;c.mix(b,{_compareNodeOrder:function(b,a){return!b.compareDocumentPosition||
!a.compareDocumentPosition?b.compareDocumentPosition?-1:1:b.compareDocumentPosition(a)&4?-1:1},_isTag:p,_getAttr:m,_hasSingleClass:j,_matchesInternal:function(b,a){for(var c=[],d=0,f=i(k.querySelectorAll(b)),h,g=a.length;d<g;d++)h=a[d],-1!=f.indexOf(h)&&c.push(h);return c},_selectInternal:function(b,a){return i(a.querySelectorAll(b))},query:q,get:function(b,a){return q(b,a)[0]||null},unique:function(){function a(e,d){return e==d?(c=!0,0):b._compareNodeOrder(e,d)}var c,d=!0;[0,0].sort(function(){d=
!1;return 0});return function(b){c=d;b.sort(a);if(c)for(var f=1,h=b.length;f<h;)b[f]===b[f-1]?(b.splice(f,1),--h):f++;return b}}(),filter:function(a,d,f){var a=q(a,f),g,k,i,n,f=[];if("string"==typeof d&&(d=w(d))&&(i=h.exec(d)))g=i[1],k=i[2],n=i[3],g?g&&!k&&!n&&(d=function(b){return m(b,"id")==g}):d=function(b){var a=!0,c=!0;k&&(a=p(b,k));n&&(c=j(b,n));return c&&a};return f=c.isFunction(d)?c.filter(a,d):b._matchesInternal(d,a)},test:function(a,c,d){a=q(a,d);return a.length&&b.filter(a,c,d).length===
a.length}});return b},{requires:["./api"]});
KISSY.add("dom/base/style",function(c,b,g){function q(b,a){return a.toUpperCase()}function j(b){return b.replace(o,"ms-").replace(y,q)}function m(b,a,c){var d={},e;for(e in a)d[e]=b[h][e],b[h][e]=a[e];c.call(b);for(e in a)b[h][e]=d[e]}function p(b,a,c){var d,e,f;if(3===b.nodeType||8===b.nodeType||!(d=b[h]))return g;a=j(a);f=z[a];a=C[a]||a;if(c!==g){null===c||c===B?c=B:!isNaN(Number(c))&&!u[a]&&(c+=x);f&&f.set&&(c=f.set(b,c));if(c!==g){try{d[a]=c}catch(k){}c===B&&d.removeAttribute&&d.removeAttribute(a)}d.cssText||
b.removeAttribute("style");return g}if(!f||!("get"in f&&(e=f.get(b,!1))!==g))e=d[a];return e===g?"":e}function k(b){var a,c=arguments;0!==b.offsetWidth?a=f.apply(g,c):m(b,G,function(){a=f.apply(g,c)});return a}function f(a,d,f){if(c.isWindow(a))return d==e?b.viewportWidth(a):b.viewportHeight(a);if(9==a.nodeType)return d==e?b.docWidth(a):b.docHeight(a);var h=d===e?["Left","Right"]:["Top","Bottom"],g=d===e?a.offsetWidth:a.offsetHeight;if(0<g)return"border"!==f&&c.each(h,function(c){f||(g-=parseFloat(b.css(a,
"padding"+c))||0);g="margin"===f?g+(parseFloat(b.css(a,f+c))||0):g-(parseFloat(b.css(a,"border"+c+"Width"))||0)}),g;g=b._getComputedStyle(a,d);if(null==g||0>Number(g))g=a.style[d]||0;g=parseFloat(g)||0;f&&c.each(h,function(c){g+=parseFloat(b.css(a,"padding"+c))||0;"padding"!==f&&(g+=parseFloat(b.css(a,"border"+c+"Width"))||0);"margin"===f&&(g+=parseFloat(b.css(a,f+c))||0)});return g}var i=c.Env.host,n=c.UA,d=b.nodeName,a=i.document,h="style",w=/^margin/,e="width",t="display"+c.now(),u={fillOpacity:1,
fontWeight:1,lineHeight:1,opacity:1,orphans:1,widows:1,zIndex:1,zoom:1},o=/^-ms-/,l=/([A-Z]|^ms)/g,B="",x="px",A=/\d(?!px)[a-z%]+$/i,z={},C={"float":"cssFloat"},r={},y=/-([a-z])/ig;c.mix(b,{_camelCase:j,_CUSTOM_STYLES:z,_cssProps:C,_getComputedStyle:function(a,c){var d="",e,f,g,k,i;f=a.ownerDocument;c=c.replace(l,"-$1").toLowerCase();if(e=f.defaultView.getComputedStyle(a,null))d=e.getPropertyValue(c)||e[c];""===d&&!b.contains(f,a)&&(c=C[c]||c,d=a[h][c]);b._RE_NUM_NO_PX.test(d)&&w.test(c)&&(i=a.style,
f=i.width,g=i.minWidth,k=i.maxWidth,i.minWidth=i.maxWidth=i.width=d,d=e.width,i.width=f,i.minWidth=g,i.maxWidth=k);return d},style:function(a,d,e){var a=b.query(a),f,h=a[0];if(c.isPlainObject(d)){for(f in d)for(h=a.length-1;0<=h;h--)p(a[h],f,d[f]);return g}if(e===g)return f="",h&&(f=p(h,d,e)),f;for(h=a.length-1;0<=h;h--)p(a[h],d,e);return g},css:function(a,d,e){var a=b.query(a),f=a[0],h;if(c.isPlainObject(d)){for(h in d)for(f=a.length-1;0<=f;f--)p(a[f],h,d[h]);return g}d=j(d);h=z[d];if(e===g){e="";
if(f&&(!h||!("get"in h&&(e=h.get(f,!0))!==g)))e=b._getComputedStyle(f,d);return"undefined"==typeof e?"":e}for(f=a.length-1;0<=f;f--)p(a[f],d,e);return g},show:function(c){var c=b.query(c),d,e,f;for(f=c.length-1;0<=f;f--)if(e=c[f],e[h].display=b.data(e,t)||B,"none"===b.css(e,"display")){d=e.tagName.toLowerCase();var g=void 0,k=r[d],i=void 0;r[d]||(g=a.body||a.documentElement,i=a.createElement(d),b.prepend(i,g),k=b.css(i,"display"),g.removeChild(i),r[d]=k);d=k;b.data(e,t,d);e[h].display=d}},hide:function(a){var a=
b.query(a),c,d;for(d=a.length-1;0<=d;d--){c=a[d];var e=c[h],f=e.display;"none"!==f&&(f&&b.data(c,t,f),e.display="none")}},toggle:function(a){var a=b.query(a),c,d;for(d=a.length-1;0<=d;d--)c=a[d],"none"===b.css(c,"display")?b.show(c):b.hide(c)},addStyleSheet:function(a,c,d){a=a||i;"string"==typeof a&&(d=c,c=a,a=i);var a=b.get(a),a=b.getWindow(a).document,e;if(d&&(d=d.replace("#",B)))e=b.get("#"+d,a);e||(e=b.create("<style>",{id:d},a),b.get("head",a).appendChild(e),e.styleSheet?e.styleSheet.cssText=
c:e.appendChild(a.createTextNode(c)))},unselectable:function(a){var a=b.query(a),e,f,g=0,k,i;for(f=a.length-1;0<=f;f--)if(e=a[f],i=e[h],i.UserSelect="none",n.gecko)i.MozUserSelect="none";else if(n.webkit)i.WebkitUserSelect="none";else if(n.ie||n.opera){i=e.getElementsByTagName("*");e.setAttribute("unselectable","on");for(k=["iframe","textarea","input","select"];e=i[g++];)c.inArray(d(e),k)||e.setAttribute("unselectable","on")}},innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,width:0,height:0});
c.each([e,"height"],function(a){b["inner"+c.ucfirst(a)]=function(c){return(c=b.get(c))&&k(c,a,"padding")};b["outer"+c.ucfirst(a)]=function(c,d){var e=b.get(c);return e&&k(e,a,d?"margin":"border")};b[a]=function(c,d){var e=b.css(c,a,d);e&&(e=parseFloat(e));return e}});var G={position:"absolute",visibility:"hidden",display:"block"};c.each(["height","width"],function(a){z[a]={get:function(b,c){var d;c&&(d=k(b,a)+"px");return d}}});c.each(["left","top"],function(c){z[c]={get:function(d,e){var f,h,g;if(e){g=
b.css(d,"position");if("static"===g)return"auto";f=b._getComputedStyle(d,c);if((h="auto"===f)&&"relative"===g)return"0px";if(h||A.test(f)){g={top:0,left:0};if("fixed"==b.css(d,"position"))h=d.getBoundingClientRect();else{for(f=d.offsetParent||(d.ownerDocument||a).body;f&&!H.test(f.nodeName)&&"static"===b.css(f,"position");)f=f.offsetParent;h=b.offset(d);g=b.offset(f);g.top+=parseFloat(b.css(f,"borderTopWidth"))||0;g.left+=parseFloat(b.css(f,"borderLeftWidth"))||0}h.top-=parseFloat(b.css(d,"marginTop"))||
0;h.left-=parseFloat(b.css(d,"marginLeft"))||0;f={top:h.top-g.top,left:h.left-g.left}[c]+"px"}}return f}}});var H=/^(?:body|html)$/i;return b},{requires:["./api"]});
KISSY.add("dom/base/traversal",function(c,b,g){function q(k,f,i,n,d,a,h){if(!(k=b.get(k)))return null;if(0===f)return k;a||(k=k[i]);if(!k)return null;d=d&&b.get(d)||null;f===g&&(f=1);var a=[],m=c.isArray(f),e,q;c.isNumber(f)&&(e=0,q=f,f=function(){return++e===q});for(;k&&k!=d;){if((k.nodeType==p.ELEMENT_NODE||k.nodeType==p.TEXT_NODE&&h)&&j(k,f)&&(!n||n(k)))if(a.push(k),!m)break;k=k[i]}return m?a:a[0]||null}function j(g,f){if(!f)return!0;if(c.isArray(f)){var i,j=f.length;if(!j)return!0;for(i=0;i<j;i++)if(b.test(g,
f[i]))return!0}else if(b.test(g,f))return!0;return!1}function m(g,f,i,j){var d=[],a,h;if((a=g=b.get(g))&&i)a=g.parentNode;if(a){i=c.makeArray(a.childNodes);for(a=0;a<i.length;a++)h=i[a],(j||h.nodeType==p.ELEMENT_NODE)&&h!=g&&d.push(h);f&&(d=b.filter(d,f))}return d}var p=b.NodeType;c.mix(b,{_contains:function(b,c){return!!(b.compareDocumentPosition(c)&16)},closest:function(b,c,g,j){return q(b,c,"parentNode",function(b){return b.nodeType!=p.DOCUMENT_FRAGMENT_NODE},g,!0,j)},parent:function(b,c,i){return q(b,
c,"parentNode",function(b){return b.nodeType!=p.DOCUMENT_FRAGMENT_NODE},i,g)},first:function(c,f,i){c=b.get(c);return q(c&&c.firstChild,f,"nextSibling",g,g,!0,i)},last:function(c,f,i){c=b.get(c);return q(c&&c.lastChild,f,"previousSibling",g,g,!0,i)},next:function(b,c,i){return q(b,c,"nextSibling",g,g,g,i)},prev:function(b,c,i){return q(b,c,"previousSibling",g,g,g,i)},siblings:function(b,c,g){return m(b,c,!0,g)},children:function(b,c){return m(b,c,g)},contents:function(b,c){return m(b,c,g,1)},contains:function(c,
f){c=b.get(c);f=b.get(f);return c&&f?b._contains(c,f):!1},index:function(g,f){var i=b.query(g),j,d=0;j=i[0];if(!f){i=j&&j.parentNode;if(!i)return-1;for(;j=j.previousSibling;)j.nodeType==p.ELEMENT_NODE&&d++;return d}d=b.query(f);return"string"===typeof f?c.indexOf(j,d):c.indexOf(d[0],i)},equals:function(c,f){c=b.query(c);f=b.query(f);if(c.length!=f.length)return!1;for(var g=c.length;0<=g;g--)if(c[g]!=f[g])return!1;return!0}});return b},{requires:["./api"]});
