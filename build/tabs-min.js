/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Apr 17 00:23
*/
KISSY.add("tabs/bar",function(e,d){var b=d.extend({createDom:function(){this.get("el").attr("role","tablist")},handleKeyEventInternal:function(c){var a=this.get("selectedTab"),c=this.getNextItemByKeyEventInternal(c,a);if(e.isBoolean(c))return c;c.set("selected",!0);return!0},renderUI:function(){var c=this,a=c.get("children");e.each(a,function(a){a.get("selected")&&c.set("selectedTab",a)})},_onSetSelectedTab:function(c,a){var b;c&&(a&&(b=a.prevVal)&&b.set("selected",!1),c.set("selected",!0))},_onSetHighlightedItem:function(){b.superclass._onSetHighlightedItem.apply(this,
arguments);"mouse"==this.get("changeType")&&this._onSetSelectedTab.apply(this,arguments)},bindUI:function(){var b=this;b.on("afterSelectedChange",function(a){a.newVal&&a.target.isTabsTab&&b.set("selectedTab",a.target)})}},{ATTRS:{selectedTab:{},changeType:{value:"click"},defaultChildCfg:{value:{xclass:"tabs-tab"}}}},{xclass:"tabs-bar",priority:30});b.ChangeType={CLICK:"click",MOUSE:"mouse"};return b},{requires:["toolbar"]});
KISSY.add("tabs/body",function(e,d,b){var c=d.Container.extend({renderUI:function(){var a=this,c=a.get("children");e.each(c,function(c,f){return c.isController&&c.get("selected")?(a.set("selectedPanelIndex",f),!1):b})},renderChild:function(a){return this.get("lazyRender")&&(a.isController&&!a.get("selected")||!a.isController&&!a.selected)?a:c.superclass.renderChild.apply(this,arguments)},selectPanel:function(a){a.isController?a.set("selected",!0):a.selected=!0;this.get("lazyRender")&&this.renderChild(a)},
bindUI:function(){var a=this;a.on("afterSelectedPanelIndexChange",function(b){var c,f=a.get("children"),i;if(c=f[b.newVal])(i=f[b.prevVal])&&i.set("selected",!1),a.selectPanel(c)})}},{ATTRS:{selectedPanelIndex:{},allowTextSelection:{value:!0},focusable:{value:!1},lazyRender:{},handleMouseEvents:{value:!1},delegateChildren:{value:!1},defaultChildCfg:{value:{xclass:"tabs-panel"}}}},{xclass:"tabs-body"});return c},{requires:["component/base"]});
KISSY.add("tabs/panel-render",function(e,d){return d.Render.extend({createDom:function(){this.get("el").attr("role","tabpanel")},_onSetSelected:function(b){var c=this.get("el"),a=this.get("prefixCls")+"tabs-panel-selected";c[b?"addClass":"removeClass"](a);c.attr("aria-hidden",!b)}},{ATTRS:{selected:{value:!1}},HTML_PARSER:{selected:function(b){var c=this.get("prefixCls")+"tabs-panel-selected";return b.hasClass(c)}}})},{requires:["component/base"]});
KISSY.add("tabs/panel",function(e,d,b){return d.Controller.extend({isTabsPanel:1},{ATTRS:{selected:{view:1},focusable:{value:!1},allowTextSelection:{value:!0},xrender:{value:b}}},{xclass:"tabs-panel"})},{requires:["component/base","./panel-render"]});
KISSY.add("tabs/render",function(e,d){return d.Render.extend({_onSetBarOrientation:function(b){this.get("el").removeClass(this.getCssClassWithPrefix("tabs-top tabs-bottom tabs-left tabs-right")).addClass(this.getCssClassWithPrefix("tabs-"+b))}},{ATTRS:{barOrientation:{value:"top"}},HTML_PARSER:{barOrientation:function(b){return(b=b[0].className.match(/tabs-(top|bottom|left|right)\b/))&&b[1]||"top"}}})},{requires:["component/base"]});
KISSY.add("tabs/tab-render",function(e,d){return d.Render.extend({createDom:function(){this.get("el").attr("role","tab")},_onSetSelected:function(b){var c=this.get("el"),a=this.get("prefixCls")+"tabs-tab-selected";c[b?"addClass":"removeClass"](a);c.attr("aria-selected",!!b)}},{ATTRS:{selected:{value:!1}},HTML_PARSER:{selected:function(b){var c=this.get("prefixCls")+"tabs-tab-selected";return b.hasClass(c)}}})},{requires:["button"]});
KISSY.add("tabs/tab",function(e,d,b){return d.extend({isTabsTab:!0,bindUI:function(){this.on("click",function(){this.set("selected",!0)})}},{ATTRS:{handleMouseEvents:{value:!1},focusable:{value:!1},selected:{view:1},xrender:{value:b}}},{xclass:"tabs-tab",priority:30})},{requires:["button","./tab-render"]});
KISSY.add("tabs",function(e,d,b,c,a,g,h){a=d.Controller.extend({initializer:function(){var f,a,b=this.get("prefixCls"),c={prefixCls:b,xclass:"tabs-bar",changeType:this.get("changeType"),children:[]},b={prefixCls:b,xclass:"tabs-body",lazyRender:this.get("lazyRender"),children:[]},d=c.children,j=b.children;(a=this.get("items"))&&e.each(a,function(a){f=f||a.selected;d.push({content:a.title,selected:a.selected});j.push({content:a.content,selected:a.selected})});!f&&d.length&&(d[0].selected=!0,j[0].selected=
!0);this.set("bar",c);this.set("body",b)},addItem:function(f,a){var b=this.get("bar"),c,d,e=this.get("body");"undefined"==typeof a&&(a=b.get("children").length);c={content:f.title};d={content:f.content};c=b.addChild(c,a);e.addChild(d,a);f.selected&&(b.set("selectedTab",c),e.set("selectedPanelIndex",a));return this},removeItemAt:function(f,a){var b=this.get("bar"),c=b.get("children"),d=b.getChildAt(f),e=this.get("body");d.get("selected")&&(1==c.length?b.set("selectedTab",null):0==f?b.set("selectedTab",
b.getChildAt(f+1)):b.set("selectedTab",b.getChildAt(f-1)));b.removeChild(b.getChildAt(f),a);e.removeChild(e.getChildAt(f),a);return this},removeItemByTab:function(a,b){return this.removeItemAt(e.indexOf(a,this.get("bar").get("children")),b)},removeItemByPanel:function(a,b){return this.removeItemAt(e.indexOf(a,this.get("body").get("children")),b)},getSelectedTab:function(){var a=this.get("bar"),b=null;e.each(a.get("children"),function(a){if(a.get("selected"))return b=a,!1});return b},getSelectedPanel:function(){var a=
this.get("body"),b=null;e.each(a.get("children"),function(a){if(a.get("selected"))return b=a,!1});return b},getTabs:function(){return this.get("bar").get("children")},getPanels:function(){return this.get("body").get("children")},getTabAt:function(a){return this.get("bar").get("children")[a]},getPanelAt:function(a){return this.get("body").get("children")[a]},setSelectedTab:function(a){var b=this.get("bar"),c=this.get("body");b.set("selectedTab",a);c.set("selectedPanelIndex",e.indexOf(a,b.get("children")));
return this},setSelectedPanel:function(a){var b=this.get("bar"),c=this.get("body"),a=e.indexOf(a,c.get("children"));c.set("selectedPanelIndex",a);b.set("selectedTab",this.getTabAt(a));return this},renderUI:function(){var a=this.get("barOrientation"),b=this.get("el"),c=this.get("body"),d=this.get("bar");d.set("render",b);c.set("render",b);"bottom"==a?(c.render(),d.render()):(d.render(),c.render())},decorateInternal:function(a){var d=this.get("prefixCls"),e=this.get("changeType"),g=a.children("."+d+
"tabs-bar"),h=a.children("."+d+"tabs-body");this.set("el",a);this.set("bar",new b({srcNode:g,changeType:e,prefixCls:d}));this.set("body",new c({srcNode:h,prefixCls:d}))},bindUI:function(){this.on("afterSelectedTabChange",function(a){this.setSelectedTab(a.newVal)})}},{ATTRS:{items:{},changeType:{},lazyRender:{value:!1},handleMouseEvents:{value:!1},allowTextSelection:{value:!0},focusable:{value:!1},bar:{setter:function(a){a&&!a.isController&&(a=d.create(a,this));a&&a.addTarget(this);return a},valueFn:function(){return d.create({xclass:"tabs-bar",
prefixCls:this.get("prefixCls")})}},body:{setter:function(a){return a&&!a.isController?d.create(a,this):a},valueFn:function(){return d.create({xclass:"tabs-body",prefixCls:this.get("prefixCls")})}},barOrientation:{view:1},xrender:{value:h}}},{xclass:"tabs"});a.Orientation={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"};a.ChangeType=b.ChangeType;a.Bar=b;a.Body=c;a.Panel=g;return a},{requires:"component/base,tabs/bar,tabs/body,tabs/tab,tabs/panel,tabs/render".split(",")});
