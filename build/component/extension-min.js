/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Apr 17 00:14
*/
KISSY.add("component/extension/align",function(f,c,n){function h(a){var d=a.ownerDocument.body,g=c.css(a,"position");if(!("fixed"==g||"absolute"==g))return"html"==a.nodeName.toLowerCase()?null:a.parentNode;for(a=a.parentNode;a&&a!=d;a=a.parentNode)if(g=c.css(a,"position"),"static"!=g)return a;return null}function p(a){var d,g,b={left:0,right:Infinity,top:0,bottom:Infinity},k;g=a.ownerDocument;d=g.body;for(g=g.documentElement;a=h(a);)if((!t.ie||0!=a.clientWidth)&&a!=d&&a!=g&&"visible"!=c.css(a,"overflow"))k=
c.offset(a),k.left+=a.clientLeft,k.top+=a.clientTop,b.top=Math.max(b.top,k.top),b.right=Math.min(b.right,k.left+a.clientWidth),b.bottom=Math.min(b.bottom,k.top+a.clientHeight),b.left=Math.max(b.left,k.left);a=c.scrollLeft();k=c.scrollTop();b.left=Math.max(b.left,a);b.top=Math.max(b.top,k);d=c.viewportWidth();g=c.viewportHeight();b.right=Math.min(b.right,a+d);b.bottom=Math.min(b.bottom,k+g);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}function q(a,d,g,b){var c,i;c=a.left;i=a.top;
d=r(d,g[0]);a=r(a,g[1]);a=[a.left-d.left,a.top-d.top];return{left:c-a[0]+ +b[0],top:i-a[1]+ +b[1]}}function m(a,d,g){var b=[];f.each(a,function(a){b.push(a.replace(d,function(a){return g[a]}))});return b}function o(){}function s(a){var d,g;f.isWindow(a[0])?(d={left:c.scrollLeft(),top:c.scrollTop()},g=c.viewportWidth(),a=c.viewportHeight()):(d=a.offset(),g=a.outerWidth(),a=a.outerHeight());d.width=g;d.height=a;return d}function r(a,d){var g=d.charAt(0),b=d.charAt(1),c=a.width,i=a.height,e,j;e=a.left;
j=a.top;"c"===g?j+=i/2:"b"===g&&(j+=i);"c"===b?e+=c/2:"r"===b&&(e+=c);return{left:e,top:j}}var u=f.Env.host,t=f.UA;o.__getOffsetParent=h;o.__getVisibleRectForElement=p;o.ATTRS={align:{value:{}}};o.prototype={_onSetAlign:function(a){a&&a.points&&this.align(a.node,a.points,a.offset,a.overflow)},align:function(a,d,c,b){var a=n.one(a||u),c=c&&[].concat(c)||[0,0],b=b||{},k=this.get("el"),i=0,e=p(k[0]),j=s(k),h=s(a),a=q(j,h,d,c),l=f.merge(j,a);if(e&&(b.adjustX||b.adjustY)){if(a.left<e.left||a.left+j.width>
e.right)i=1,d=m(d,/[lr]/ig,{l:"r",r:"l"}),c[0]=-c[0];if(a.top<e.top||a.top+j.height>e.bottom)i=1,d=m(d,/[tb]/ig,{t:"b",b:"t"}),c[1]=-c[1];i&&(a=q(j,h,d,c),f.mix(l,a));d={};d.adjustX=b.adjustX&&(a.left<e.left||a.left+j.width>e.right);d.adjustY=b.adjustY&&(a.top<e.top||a.top+j.height>e.bottom);if(d.adjustX||d.adjustY)b=f.clone(a),i={width:j.width,height:j.height},d.adjustX&&b.left<e.left&&(b.left=e.left),d.resizeWidth&&b.left>=e.left&&b.left+i.width>e.right&&(i.width-=b.left+i.width-e.right),d.adjustX&&
b.left+i.width>e.right&&(b.left=Math.max(e.right-i.width,e.left)),d.adjustY&&b.top<e.top&&(b.top=e.top),d.resizeHeight&&b.top>=e.top&&b.top+i.height>e.bottom&&(i.height-=b.top+i.height-e.bottom),d.adjustY&&b.top+i.height>e.bottom&&(b.top=Math.max(e.bottom-i.height,e.top)),l=f.mix(b,i)}l.left!=j.left&&(this.setInternal("x",null),this.get("view").setInternal("x",null),this.set("x",l.left));l.top!=j.top&&(this.setInternal("y",null),this.get("view").setInternal("y",null),this.set("y",l.top));l.width!=
j.width&&k.width(k.width()+l.width-j.width);l.height!=j.height&&k.height(k.height()+l.height-j.height);return this},center:function(a){this.set("align",{node:a,points:["cc","cc"],offset:[0,0]});return this}};return o},{requires:["dom","node"]});
KISSY.add("component/extension/content-box-render",function(f,c,n){function h(){}h.prototype={__createDom:function(){var f,h=this.get("el");f=this.getCssClassWithState("contentbox");var m=h[0].childNodes;f=this.getCssClassWithPrefix("contentbox")+(f?" "+f:f);m=m.length&&n._nodeListToFragment(m);f=c.all('<div class="'+f+'"></div>');m&&f.append(m);h.append(f);this.setInternal("contentEl",f)}};return h},{requires:["node","dom"]});
KISSY.add("component/extension",function(f,c,n,h,p,q){h.Render=p;return{Align:c,ContentBox:{Render:n},Position:h,Shim:{Render:q}}},{requires:["./extension/align","./extension/content-box-render","./extension/position","./extension/position-render","./extension/shim-render"]});
KISSY.add("component/extension/position-render",function(){function f(){}f.ATTRS={x:{},y:{},zIndex:{}};f.prototype={__createDom:function(){this.get("el").addClass(this.get("prefixCls")+"ext-position")},_onSetZIndex:function(c){this.get("el").css("z-index",c)},_onSetX:function(c){null!=c&&this.get("el").offset({left:c})},_onSetY:function(c){null!=c&&this.get("el").offset({top:c})}};return f});
KISSY.add("component/extension/position",function(f){function c(){}c.ATTRS={x:{view:1},y:{view:1},xy:{setter:function(c){var h=f.makeArray(c);h.length&&(h[0]&&this.set("x",h[0]),h[1]&&this.set("y",h[1]));return c},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{value:!1}};c.prototype={move:function(c,h){f.isArray(c)&&(h=c[1],c=c[0]);this.set("xy",[c,h]);return this}};return c});
KISSY.add("component/extension/shim-render",function(){function f(){}f.prototype={__createDom:function(){this.get("el").prepend("<iframe style='position: absolute;border: none;width: expression(this.parentNode.clientWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.clientHeight);'/>")}};return f});
